<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ä–æ–∫–∞ –ö–ó</title>
  <style>
    input[type="number"] {
      padding: 4px;
      border: 1px solid #ccc;
      border-radius: 4px;
      text-align: center;
      font-size: 14px;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f7f9fc;
      color: #333;
    }
    h1, h2, h3 {
      color: #2c3e50;
    }
    .section {
      background: white;
      padding: 16px;
      margin: 16px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin: 6px 0;
      cursor: pointer;
    }
    input[type="checkbox"] {
      transform: scale(1.1);
    }
    button {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background-color: #2980b9;
    }
    #result {
      font-size: 20px;
      font-weight: bold;
      margin-top: 20px;
      padding: 16px;
      background-color: #e8f4fd;
      border-radius: 8px;
      text-align: center;
    }
    .note {
      font-size: 14px;
      color: #7f8c8d;
      font-style: italic;
    }
    .category {
      font-weight: bold;
      margin-top: 12px;
    }
  </style>
</head>
<body>

  <h1>‚öñÔ∏è –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ä–æ–∫–∞ –Ω–∞–∫–∞–∑–∞–Ω–∏—è</h1>
  <p class="note">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—å–∏ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã. –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–µ: (—Å–∞–º–∞—è —Ç—è–∂–∫–∞—è —Å—Ç–∞—Ç—å—è + –¥–æ 50% –æ—Ç –Ω–µ—ë) * –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã + —Ä–µ—Ü–∏–¥–∏–≤—ã.</p>

  <div class="section">
    <h2>üìå –°—Ç–∞—Ç—å–∏ –ö–ó</h2>
    <p class="note">–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ. –í –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Äî —Ç–æ–ª—å–∫–æ —Å–∞–º–∞—è —Ç—è–∂–∫–∞—è.</p>
	
	<div class="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –•00 (–ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤ –≤–ª–∞—Å—Ç–∏)</div>
	<label><input type="checkbox" name="article" value="100"> 100 ‚Äî –û—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–Ω–æ–≥–æ –ª–∏—Ü–∞ (10 –º–∏–Ω)</label>
	<label><input type="checkbox" name="article" value="200"> 200 ‚Äî –°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∞–º –≤–ª–∞—Å—Ç–∏ (15 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="300"> 300 ‚Äî –ù–∞–ø–∞–¥–µ–Ω–∏–µ –Ω–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç–Ω–æ–µ –ª–∏—Ü–æ (25 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="400"> 400 ‚Äî –í–æ—Å—Å—Ç–∞–Ω–∏–µ (40 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="500"> 500 ‚Äî –£–±–∏–π—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ—Å—Ç–Ω–æ–≥–æ –ª–∏—Ü–∞ (–ü–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ–µ)</label>

    <div class="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –•01 (–ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤ –ª–∏—á–Ω–æ—Å—Ç–∏)</div>
	<label><input type="checkbox" name="article" value="101"> 101 ‚Äî –•–∞—Ä–∞—Å—Å–º–µ–Ω—Ç (10 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="201"> 201 ‚Äî –ù–∞–ø–∞–¥–µ–Ω–∏–µ (15 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="301"> 301 ‚Äî –ù–∞–Ω–µ—Å–µ–Ω–∏–µ —É–≤–µ—á–∏–π (25 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="401"> 401 ‚Äî –£–±–∏–π—Å—Ç–≤–æ (40 –º–∏–Ω)</label>
	<label><input type="checkbox" name="article" value="501"> 501 ‚Äî –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ —Ç–µ–ª–∞ (–ü–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ–µ)</label>

    <div class="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –•02 (–Ω–∞—Ä—É—à–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –æ–±–æ—Ä–æ—Ç–∞ –æ–ø–∞—Å–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤)</div>
    <label><input type="checkbox" name="article" value="202"> 202 ‚Äî –û–±–æ—Ä–æ—Ç –Ω–∞—Ä–∫–æ—Ç–∏–∫–æ–≤ (15 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="302"> 302 ‚Äî –û–±–æ—Ä–æ—Ç –∫–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥—ã (25 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="402"> 402 ‚Äî –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è –æ–ø–∞—Å–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤ (40 –º–∏–Ω)</label>
	<label><input type="checkbox" name="article" value="502"> 502 ‚Äî –í–ª–∞–¥–µ–Ω–∏–µ –≤—Ä–∞–∂–µ—Å–∫–∏–º —Å–Ω–∞—Ä—è–∂–µ–Ω–∏–µ–º (–ü–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ–µ)</label>
	
	<div class="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –•03 (–Ω–µ–∑–∞–∫–æ–Ω–Ω–∞—è —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞)</div>
    <label><input type="checkbox" name="article" value="103"> 103 ‚Äî –ó–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–æ–π (10 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="203"> 203 ‚Äî –í–ª–∞–¥–µ–Ω–∏–µ –±–æ–µ–≤—ã–º –ø—Ä–∏—Å–ø–æ—Å–æ–±–ª–µ–Ω–∏–µ–º (15 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="303"> 303 ‚Äî –í–ª–∞–¥–µ–Ω–∏–µ –±–æ–µ–≤—ã–º –æ—Ä—É–∂–∏–µ–º (25 –º–∏–Ω)</label>
	<label><input type="checkbox" name="article" value="403"> 403 ‚Äî –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä—É–∂–∏—è (40)</label>

	<div class="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –•04 (–Ω–∞—Ä—É—à–µ–Ω–∏–µ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞)</div>
    <label><input type="checkbox" name="article" value="104"> 104 ‚Äî –•—É–ª–∏–≥–∞–Ω—Å—Ç–≤–æ (10 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="204"> 204 ‚Äî –ü–æ—Ä—á–∞ –∏–º—É—â–µ—Å—Ç–≤–∞ (15 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="304"> 304 ‚Äî –ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ (25 –º–∏–Ω)</label>
	<label><input type="checkbox" name="article" value="504"> 504 ‚Äî –¢–µ—Ä–∞–∫—Ç (–ü–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ–µ)</label>

    <div class="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –•05 (—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è)</div>
	<label><input type="checkbox" name="article" value="105"> 105 ‚Äî –ú–µ–ª–∫–∞—è –∫—Ä–∞–∂–∞ (10 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="205"> 205 ‚Äî –ì—Ä–∞–±—ë–∂ (15 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="305"> 305 ‚Äî –ö—Ä–∞–∂–∞ (25 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="405"> 405 ‚Äî –†–∞–∑–±–æ–π (40 –º–∏–Ω)</label>
	<label><input type="checkbox" name="article" value="505"> 505 ‚Äî –û—Å–æ–±–æ –∫—Ä—É–ø–Ω–æ–µ —Ö–∏—â–µ–Ω–∏–µ (–ü–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ–µ)</label>

    <div class="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –•06 (–Ω–∞—Ä—É—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π –¥–æ–ø—É—Å–∫–∞)</div>
	<label><input type="checkbox" name="article" value="106"> 106 ‚Äî –ü—Ä–æ–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ (10 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="306"> 306 ‚Äî –ü—Ä–æ–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫—É—é —Ç–æ—á–∫—É (25 –º–∏–Ω)</label>
	<label><input type="checkbox" name="article" value="506"> 506 ‚Äî –ü—Ä–æ–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–µ –≤ –∑–∞—â–∏—â—ë–Ω–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫—É—é —Ç–æ—á–∫—É (–ü–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ–µ)</label>

    <div class="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –•07 (–ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤ —Ç—Ä—É–¥–æ–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞)</div>
    <label><input type="checkbox" name="article" value="207"> 207 ‚Äî –•–∞–ª–∞—Ç–Ω–æ—Å—Ç—å (15 –º–∏–Ω)</label>
	<label><input type="checkbox" name="article" value="307"> 307 ‚Äî –°–∞–±–æ—Ç–∞–∂ (25 –º–∏–Ω)</label>
    <label><input type="checkbox" name="article" value="407"> 407 ‚Äî –ì—Ä—É–±–∞—è —Ö–∞–ª–∞—Ç–Ω–æ—Å—Ç—å (40 –º–∏–Ω)</label>
	<label><input type="checkbox" name="article" value="507"> 507 ‚Äî –û—Å–æ–±–æ –∫—Ä—É–ø–Ω—ã–π —Å–∞–±–æ—Ç–∞–∂ (–ü–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ–µ)</label>
  </div>

  <div class="section">
    <h2>üîß –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã</h2>
    <p class="note">–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ <strong>–æ–¥–Ω–æ –ø–æ—Å–ª–∞–±–ª–µ–Ω–∏–µ</strong> –∏ <strong>–æ–¥–Ω–æ —É—Ö—É–¥—à–µ–Ω–∏–µ</strong>. –†–µ—Ü–∏–¥–∏–≤ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º.</p>

    <h3>‚úÖ –ü–æ—Å–ª–∞–±–ª–µ–Ω–∏—è</h3>
    <label><input type="checkbox" name="modifier" value="–ö—Ä–∞–π–Ω—è—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å"> –ö—Ä–∞–π–Ω—è—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å (–°–Ω—è—Ç–∏–µ –æ–±–≤–∏–Ω–µ–Ω–∏–π)</label>
    <label><input type="checkbox" name="modifier" value="–Ø–≤–∫–∞ —Å –ø–æ–≤–∏–Ω–Ω–æ–π"> –Ø–≤–∫–∞ —Å –ø–æ–≤–∏–Ω–Ω–æ–π (‚Äì50% –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Å—Ä–æ–∫–∞)</label>
    <label><input type="checkbox" name="modifier" value="–°–¥–µ–ª–∫–∞ —Å–æ —Å–ª–µ–¥—Å—Ç–≤–∏–µ–º"> –°–¥–µ–ª–∫–∞ —Å–æ —Å–ª–µ–¥—Å—Ç–≤–∏–µ–º (‚Äì50% –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Å—Ä–æ–∫–∞)</label>
    <label><input type="checkbox" name="modifier" value="–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É–º—ã—Å–ª–∞"> –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É–º—ã—Å–ª–∞ (–ù–∞–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–µ–¥. —Å—Ç–µ–ø–µ–Ω–∏ —Ç—è–∂–µ—Å—Ç–∏)</label>

    <h3>‚ùå –£—Ö—É–¥—à–µ–Ω–∏—è</h3>
    <label><input type="checkbox" name="modifier" value="–ü–æ–º–µ—Ö–∞ —Å–ª–µ–¥—Å—Ç–≤–∏—é"> –ü–æ–º–µ—Ö–∞ —Å–ª–µ–¥—Å—Ç–≤–∏—é (+50% –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Å—Ä–æ–∫–∞)</label>
    <label><input type="checkbox" name="modifier" value="–î–æ–ª–∂–Ω–æ—Å—Ç–Ω–æ–µ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ"> –î–æ–ª–∂–Ω–æ—Å—Ç–Ω–æ–µ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ (+50% –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Å—Ä–æ–∫–∞)</label>
	<label>
	  –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ü–∏–¥–∏–≤–æ–≤: 
	  <input type="number" id="recidivismCount" min="0" value="0" style="width: 60px;">
	  (+5 –º–∏–Ω –∑–∞ –∫–∞–∂–¥—ã–π)
	</label>
  </div>

  <button onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ä–æ–∫</button>
  <div id="result"></div>

  <script>
    // –ë–∞–∑–æ–≤—ã–µ —Å—Ä–æ–∫–∏ –ø–æ —Å—Ç–∞—Ç—å—è–º
    const basePenalties = {
      '100':10,'101':10,'102':10,'103':10,'104':10,'105':10,'106':10,'107':10,'200':15,'201':15,'202':15,'203':15,'204':15,
	  '205':15,'206':15,'207':15,'300':25,'301':25,'302':25,'303':25,'304':25,'305':25,'306':25,'307':25,'400':40,'401':40,
	  '402':40,'403':40,'404':40,'405':40,'406':40,'407':40,'500':65,'501':65,'502':65,'503':65,'504':65,'505':65,'506':65,
	  '507':65
    };

    // –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
    const modifiers = {
      '–ö—Ä–∞–π–Ω—è—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å': 0,
      '–Ø–≤–∫–∞ —Å –ø–æ–≤–∏–Ω–Ω–æ–π': 0.5,
      '–°–¥–µ–ª–∫–∞ —Å–æ —Å–ª–µ–¥—Å—Ç–≤–∏–µ–º': 0.5,
      '–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É–º—ã—Å–ª–∞': 1,
      '–ü–æ–º–µ—Ö–∞ —Å–ª–µ–¥—Å—Ç–≤–∏—é': 1.5,
      '–î–æ–ª–∂–Ω–æ—Å—Ç–Ω–æ–µ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ': 1.5,
    };

    function calculate() {
      const selectedArticles = Array.from(
        document.querySelectorAll('input[name="article"]:checked')
      ).map(cb => cb.value);

      const selectedModifiers = Array.from(
        document.querySelectorAll('input[name="modifier"]:checked')
      ).map(cb => cb.value);

      if (selectedArticles.length === 0) {
        document.getElementById('result').innerHTML = 
          "‚ö†Ô∏è –í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å—Ç–∞—Ç—å—é.";
        return;
      }

      // –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (—Ç—Ä–µ—Ç—å—è —Ü–∏—Ñ—Ä–∞ –∫–æ–¥–∞)
      const categories = {};
      selectedArticles.forEach(code => {
        const category = code[2];
        if (!categories[category]) categories[category] = [];
        categories[category].push(code);
      });
	  console.log("–ö–∞—Ç–µ–≥–æ—Ä–∏–∏: ", categories);

      // –ò–∑ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤—ã–±–∏—Ä–∞–µ–º —Å–∞–º—É—é —Ç—è–∂–∫—É—é —Å—Ç–∞—Ç—å—é
      let mainArticles = [];
      for (const cat in categories) {
        const heaviest = categories[cat].reduce((a, b) => 
          basePenalties[a] > basePenalties[b] ? a : b
        );
        mainArticles.push(heaviest);
      }
	  console.log("–°–∞–º—ã–µ —Ç—è–∂–µ–ª—ã–µ —Å—Ç–∞—Ç—å–∏ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö: ", mainArticles);

      // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å–∞–º—É—é —Ç—è–∂–∫—É—é –∏–∑ –≤—Å–µ—Ö
      const mainArticle = mainArticles.reduce((a, b) => 
        basePenalties[a] > basePenalties[b] ? a : b
	  );
	  console.log("–°–∞–º–∞—è —Ç–µ–∂–µ–ª–∞—è —Å—Ç–∞—Ç—å—è: ", mainArticle);
	// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—ã–±—Ä–∞–Ω –ª–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É–º—ã—Å–ª–∞"
	const hasNoIntent = selectedModifiers.includes('–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É–º—ã—Å–ª–∞');

	let effectiveMainPenalty = basePenalties[mainArticle];

	if (hasNoIntent) {
	  // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–Ω–∏–∂–µ–Ω–∏–µ –∫–æ –í–°–ï–ú –æ—Å–Ω–æ–≤–Ω—ã–º —Å—Ç–∞—Ç—å—è–º –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
	  const loweredArticles = mainArticles.map(code => {
		const category = parseInt(code[0]);
		if (category <= 1) {
		  // –°—Ç–∞—Ç—å–∏ 1xx –∏ –Ω–∏–∂–µ ‚Äî —Å–Ω–∏–º–∞—é—Ç—Å—è (–≤–æ–∑–≤—Ä–∞—â–∞–µ–º null –∏–ª–∏ —Ñ–ª–∞–≥ —Å–Ω—è—Ç–∏—è)
		  return null; // –æ–±–æ–∑–Ω–∞—á–∞–µ–º, —á—Ç–æ —Å—Ç–∞—Ç—å—è –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–∞
		} else {
		  // –ü–æ–Ω–∏–∂–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –Ω–∞ 1: 201 ‚Üí 101, 305 ‚Üí 205 –∏ —Ç.–¥.
		  const lowerCategory = category - 1;
		  const loweredCode = lowerCategory + code.slice(1);
		  return loweredCode;
		}
	  }).filter(code => code !== null); // –£–±–∏—Ä–∞–µ–º –∞–Ω–Ω—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏

	  // –ï—Å–ª–∏ –ø–æ—Å–ª–µ –ø–æ–Ω–∏–∂–µ–Ω–∏—è –Ω–µ –æ—Å—Ç–∞–ª–æ—Å—å –Ω–∏ –æ–¥–Ω–æ–π —Å—Ç–∞—Ç—å–∏ ‚Äî –Ω–∞–∫–∞–∑–∞–Ω–∏–µ —Å–Ω–∏–º–∞–µ—Ç—Å—è
	  if (loweredArticles.length === 0) {
		effectiveMainPenalty = 0;
	  } else {
		// –ù–∞—Ö–æ–¥–∏–º —Å–∞–º—É—é —Ç—è–∂–∫—É—é –∏–∑ –ø–æ–Ω–∏–∂–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
		const newMainArticle = loweredArticles.reduce((a, b) => 
		  basePenalties[a] > basePenalties[b] ? a : b
		);
		effectiveMainPenalty = basePenalties[newMainArticle];
	  }
	} else {
	  // –ë–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ ‚Äî –æ–±—ã—á–Ω—ã–π —Å—Ä–æ–∫
	  effectiveMainPenalty = basePenalties[mainArticle];
	}

      // –û—Å–Ω–æ–≤–Ω–æ–π —à—Ç—Ä–∞—Ñ ‚Äî —Å —É—á—ë—Ç–æ–º –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–Ω–∏–∂–µ–Ω–∏—è –ø–æ "–æ—Ç—Å—É—Ç—Å—Ç–≤–∏—é —É–º—ã—Å–ª–∞")
      const mainPenalty = effectiveMainPenalty;

      // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ–±–∞–≤–∫–∞ ‚Äî 50% –æ—Ç –û–°–ù–û–í–ù–û–ì–û —à—Ç—Ä–∞—Ñ–∞ (—É–∂–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ)
      const maxAdditional = mainPenalty * 0.5;
      let additional = 0;

      // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –∫–∞–∫–∏–µ —Å—Ç–∞—Ç—å–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥–æ–±–∞–≤–∫–∏ ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∏–ª–∏ –ø–æ–Ω–∏–∂–µ–Ω–Ω—ã–µ
      let articlesForAdditional = mainArticles.filter(code => code !== mainArticle);

      // –ï—Å–ª–∏ –ø—Ä–∏–º–µ–Ω—ë–Ω "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É–º—ã—Å–ª–∞", –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ü–û–ù–ò–ñ–ï–ù–ù–´–ï –≤–µ—Ä—Å–∏–∏ —Å—Ç–∞—Ç–µ–π
      if (hasNoIntent) {
        articlesForAdditional = articlesForAdditional
          .map(code => {
            const category = parseInt(code[0]);
            if (category <= 1) return null; // —Å–Ω–∏–º–∞–µ—Ç—Å—è
            return (category - 1) + code.slice(1); // –ø–æ–Ω–∏–∂–∞–µ–º
          })
          .filter(code => code !== null && basePenalties[code] !== undefined); // –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ
      }

      // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–æ–±–∞–≤–∫—É
      articlesForAdditional.forEach(code => {
        const penalty = basePenalties[code];
        if (additional + penalty <= maxAdditional) {
          additional += penalty;
        } else if (additional < maxAdditional) {
          additional = maxAdditional; // –î–æ–≤–æ–¥–∏–º –¥–æ –ª–∏–º–∏—Ç–∞
        }
      });

      let total = mainPenalty + additional;

      // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã: –æ–¥–∏–Ω –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π, –æ–¥–∏–Ω –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π
      let posMod = 1, negMod = 1;
      selectedModifiers.forEach(mod => {
        const value = modifiers[mod];
		// –ü–æ—Å–ª–∞–±–ª–µ–Ω–∏—è ‚Äî —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –ú–ï–ù–¨–®–ï –∏–ª–∏ –†–ê–í–ù–´ 1 (–Ω–æ –Ω–µ 1.5)
		  if (value <= 1) {
			posMod = value; // –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º, —Ç.–∫. –≤ –≥—Ä—É–ø–ø–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤—ã–±–æ—Ä
		  }
		  
		  // –£—Ö—É–¥—à–µ–Ω–∏—è ‚Äî —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –ë–û–õ–¨–®–ï 1
		  if (value > 1) {
			negMod = value; // —Ç–æ–∂–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω
		  }
		});
	  console.log("–°—Ä–æ–∫ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã: ", total, posMod, negMod);
      total *= posMod * negMod;

	// –°—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ü–∏–¥–∏–≤–æ–≤
	const recidivismInput = document.getElementById('recidivismCount');
	const recidivismCount = parseInt(recidivismInput.value) || 0; // –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –Ω–µ —á–∏—Å–ª–æ

	// –î–æ–±–∞–≤–ª—è–µ–º 5 –º–∏–Ω—É—Ç –∑–∞ –∫–∞–∂–¥—ã–π —Ä–µ—Ü–∏–¥–∏–≤
	total += recidivismCount * 5;

	console.log("–° —É—á—ë—Ç–æ–º —Ä–µ—Ü–∏–¥–∏–≤–æ–≤: ", total);

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ–µ
      if (total >= 65) {
        document.getElementById('result').innerHTML = 
          "üìå <b>–ü–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ</b>";
      } else if (total <= 0) {
        document.getElementById('result').innerHTML = 
          "‚úÖ <b>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ(–æ–±–≤–∏–Ω–µ–Ω–∏—è —Å–Ω—è—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º)</b>";
      } else if (total <= 10) {
        document.getElementById('result').innerHTML = 
          `‚è±Ô∏è <b>–°—Ä–æ–∫: ${total} –º–∏–Ω—É—Ç –∏–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</b>`;
	  } else if (total >=40 && total < 65) {
        document.getElementById('result').innerHTML = 
          `‚è±Ô∏è <b>–°—Ä–æ–∫: ${total} –º–∏–Ω—É—Ç —Å –æ—Ç–±—ã–≤–∞–Ω–∏–µ–º –≤ –ø–µ—Ä–º–∞–±—Ä–∏–≥–µ</b>`;
	  } else {
        document.getElementById('result').innerHTML = 
          `‚è±Ô∏è <b>–°—Ä–æ–∫: ${total} –º–∏–Ω—É—Ç</b>`;
      }
    }
  </script>
</body>
</html>